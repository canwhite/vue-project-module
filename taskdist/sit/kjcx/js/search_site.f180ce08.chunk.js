webpackJsonp([5],{"+RVm":function(t,e,s){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s("QV7u"),i=o(a),n=s("3iyn"),c=o(n),r=s("iuS6"),l=o(r),u=s("Au9i");e.default={components:{"bar-top":i.default,"end-line":c.default},computed:{},created:function(){},mounted:function(){l.default.setStatusBarColor("a248ff",1);var t=this,e=document.querySelector("#key");document.querySelector(".rest-btn").onclick=function(){t.key="",t.matchKey={},e.focus()},localStorage.localHistory4&&(this.localHistory=JSON.parse(localStorage.localHistory4).slice(0,30))},activated:function(){},beforeRouteEnter:function(t,e,s){s(function(t){})},beforeRouteLeave:function(t,e,s){s()},beforeDestroy:function(){},data:function(){return{styles:{"background-color":"#a248ff",color:"#fff"},key:"",matchKey:{},localHistory:[],disabled:!1,showMatch:!1,matchResult:[],showLoading:!1,showNull:!1}},methods:{restLocalHistory:function(){this.localHistory=[],localStorage.setItem("localHistory4",JSON.stringify(this.localHistory))},getMainKey:function(){var t=this;t.matchResult=[],t.key=t.key.trim(),""!=t.key&&setTimeout(function(){t.showMatch=!0,t.showLoading=!0,t.showNull=!1;var e=t.api.findWebsiteNameURL,s={orgName:t.key,pageSize:10,pageNum:1};t.post(e,s,!1).then(function(e){t.showLoading=!1,e.data.total>0?t.matchResult=e.data.rows.slice(0,10):(t.matchResult=[],t.showNull=!0)}).catch(function(e){t.matchResult=[],t.showLoading=!1,t.showNull=!0})},500)},onSubmit:function(){var t=this,e=t.key.trim();if(""==e)return(0,u.Toast)({message:"请输入网点名称查找",position:"center",duration:2e3}),void(t.matchKey={});if(""!=e&&(t.showMatch||!t.matchKey.baseOrgCode||!t.matchKey.cmsOrgId))return void(0,u.Toast)({message:"请选择网点",position:"center",duration:2e3});var s=function(){var e=-1;return t.localHistory.forEach(function(s,o){if(s.orgName==t.matchKey.orgName)return e=o}),e}();-1!=s&&t.localHistory.splice(s,1),t.localHistory.unshift(t.matchKey),localStorage.setItem("localHistory4",JSON.stringify(t.localHistory)),this.$router.push("/detail_site/"+t.matchKey.baseOrgCode+"/"+t.matchKey.cmsOrgId)}},watch:{key:function(t,e){""==t&&(this.showMatch=!1)}}}},"3iyn":function(t,e,s){function o(t){s("iKZT")}var a=s("VU/8")(s("Ebpw"),s("mPMi"),o,null,null);t.exports=a.exports},CH2O:function(t,e){},EAM4:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("header",{staticClass:"bar bar-nav bar-easy-vue",style:t.styles},[t.showReturnIcon?s("a",{staticClass:"icon iconfont uct-icon-fanhui pull-left",on:{click:t.goBack}}):t._e(),t._v(" "),t.showRightIcon?s("a",{staticClass:"icon pull-right",staticStyle:{"line-height":"24px","font-size":"13px"},on:{click:function(e){t.task()}}},[t._v(t._s(t.rightTitle))]):t._e(),t._v(" "),s("h1",{staticClass:"title"},[t._v(t._s(t.topBarTitle))])])},staticRenderFns:[]}},Ebpw:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{text:{default:"我是有底线的"},styles:{default:""}},data:function(){return{}},methods:{setText:function(t){this.text=t}}}},FPHc:function(t,e,s){function o(t){s("CH2O")}var a=s("VU/8")(s("+RVm"),s("znre"),o,"data-v-4df9f58f",null);t.exports=a.exports},QV7u:function(t,e,s){function o(t){s("bK7r")}var a=s("VU/8")(s("gZpH"),s("EAM4"),o,null,null);t.exports=a.exports},bK7r:function(t,e){},gZpH:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{showRefeshIcon:{default:!1},showReturnIcon:{default:!0},showRightIcon:{default:!1},topBarTitle:{default:"快捷查询"},rightTitle:{default:"更多"},styles:{type:Object,default:function(){return{background:"#a248ff",color:"#fff"}}}},methods:{task:function(){this.$router.push("/history")},refresh:function(){this.$store.dispatch("getData",{progress:this,refresh:!0})},goBack:function(){-1!=this.$route.path.indexOf("/home")?window.location.href="js://uct?method=closeWebview":this.$router.go(-1)}}}},iKZT:function(t,e){},mPMi:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"endline"},[t._v("———— "+t._s(t.text)+" ————")])])},staticRenderFns:[]}},znre:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"search"},[s("bar-top",{attrs:{"show-return-icon":!0,"show-right-icon":!1,styles:t.styles,topBarTitle:"网点查询"}}),t._v(" "),s("div",{staticStyle:{height:"45px"}}),t._v(" "),s("div",{staticClass:"search-form"},[s("div",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.key,expression:"key"}],staticClass:"search-input",attrs:{id:"key",type:"text",maxlength:"20",autofocus:"autofocus",autocomplete:"off",placeholder:"输入网点名称查找"},domProps:{value:t.key},on:{input:[function(e){e.target.composing||(t.key=e.target.value)},t.getMainKey]}}),t._v(" "),s("span",{staticClass:"iconfont uct-icon-sousuo search-icon"}),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:""!=t.key,expression:"key!=''"}],staticClass:"rest-btn"},[s("i",{staticClass:"iconfont uct-icon-guanbi"})])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showMatch,expression:"showMatch"}],staticClass:"match-result",on:{click:function(t){}}},[s("ul",{staticClass:"match-list"},[t._l(t.matchResult,function(e,o){return s("li",{on:{click:function(s){t.showMatch=!1,t.matchKey=e,t.key=e.orgName}}},[t._v(t._s(e.orgName))])}),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showLoading,expression:"showLoading"}],staticClass:"match-null"},[t._v("loading...")]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showNull,expression:"showNull"}],staticClass:"match-null"},[t._v("暂无匹配数据，请重新输入")])],2)])]),t._v(" "),s("div",{staticClass:"main-panel"},[s("div",{staticClass:"search-history"},[s("div",{staticClass:"prompt"},[s("span",[t._v("历史查询")]),t._v(" "),s("span",{on:{click:t.restLocalHistory}},[t._v("清空")])]),t._v(" "),t._l(t.localHistory.slice(0,10),function(e,o){return s("li",{on:{click:function(s){t.showMatch=!1,t.matchKey=e,t.key=e.orgName,t.onSubmit()}}},[t._v(t._s(e.orgName))])})],2)]),t._v(" "),s("div",{staticClass:"submit-btn"},[s("mt-button",{staticClass:"submitBtn",attrs:{type:"default",size:"large",disabled:t.disabled},on:{click:function(e){t.onSubmit()}}},[t._v("查  询")])],1)],1)},staticRenderFns:[]}}});